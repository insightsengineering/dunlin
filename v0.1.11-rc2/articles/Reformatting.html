<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Reformatting • dunlin</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Reformatting">
<link rel="stylesheet" href="../consent.css">
<script src="../consent.js" type="text/javascript" charset="utf-8"></script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">dunlin</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.11</small>

    <div style="width: 140px; margin-left: 0.5rem;"> <small class="nav-text text-muted me-auto">part of</small> <img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/nest.png?raw=true" alt="NEST" style="height: 30px;"><a href="https://pharmaverse.org/" class="external-link"><img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/pharmaverse.png?raw=true" alt="pharmaverse" style="height: 28px;"></a> </div>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/Reformatting.html">Reformatting</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-reports" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Reports</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-reports">
<li><a class="dropdown-item" href="../coverage-report/">Coverage report</a></li>
    <li><a class="dropdown-item" href="../unit-test-report/">Unit test report</a></li>
    <li><a class="dropdown-item" href="../unit-test-report-non-cran/">Non-CRAN unit test report</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/insightsengineering/dunlin"><span class="fa fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Reformatting</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/insightsengineering/dunlin/blob/v0.1.11-rc2/vignettes/Reformatting.Rmd" class="external-link"><code>vignettes/Reformatting.Rmd</code></a></small>
      <div class="d-none name"><code>Reformatting.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Reformatting in <code>dunlin</code> consists in replacing
predetermined values by another in particular variables for selected
tables of a data set stored.</p>
<p>This is performed in two steps:</p>
<ol style="list-style-type: decimal">
<li><p>A Reformatting Map (<code>rule</code> object) is created which
specifies the correspondence between the old and the new values</p></li>
<li><p>The reformatting itself is performed with the
<code><a href="../reference/reformat.html">reformat()</a></code> function.</p></li>
</ol>
</div>
<div class="section level2">
<h2 id="the-formatting-map-structure">The Formatting Map Structure<a class="anchor" aria-label="anchor" href="#the-formatting-map-structure"></a>
</h2>
<p>The Reformatting Map is a <code>rule</code> object inheriting from
<code>character</code>. Its names are the new values to be used, and its
values are the old values to be used.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/rule.html">rule</a></span><span class="op">(</span>A <span class="op">=</span> <span class="st">"a"</span>, B <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"c"</span>, <span class="st">"d"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Mapping of:</span></span>
<span><span class="co">#&gt; A  &lt;-  "a" </span></span>
<span><span class="co">#&gt; B  &lt;-  "c", "d" </span></span>
<span><span class="co">#&gt; Convert to &lt;NA&gt;: "" </span></span>
<span><span class="co">#&gt; Convert to factor: TRUE </span></span>
<span><span class="co">#&gt; Drop unused level: FALSE </span></span>
<span><span class="co">#&gt; NA-replacing level in last position: TRUE</span></span></code></pre></div>
<p>This rule will replace “a” with “A”, replace “c” or “d” with “B”.</p>
</div>
<div class="section level2">
<h2 id="calling-reformat">Calling <code>reformat</code><a class="anchor" aria-label="anchor" href="#calling-reformat"></a>
</h2>
<p><code>reformat</code> is a generic supports reformatting of
<code>character</code> or <code>factor</code>. Reformatting for other
types of variables is meaningless. <code>reformat</code> will also
preserve the attributes of the original data, e.g. the data type or
labels will be unchanged.</p>
<p>An example of reformatting <code>character</code> can be</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rule.html">rule</a></span><span class="op">(</span>A <span class="op">=</span> <span class="st">"a"</span>, B <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"c"</span>, <span class="st">"d"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/reformat.html">reformat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"c"</span>, <span class="st">"d"</span>, <span class="cn">NA</span><span class="op">)</span>, <span class="va">r</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] A    B    B    &lt;NA&gt;</span></span>
<span><span class="co">#&gt; Levels: A B</span></span></code></pre></div>
<p>We can see that the <code>NA</code> values are not changed.</p>
<p>Now we test the factor reformatting:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rule.html">rule</a></span><span class="op">(</span>A <span class="op">=</span> <span class="st">"a"</span>, B <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"c"</span>, <span class="st">"d"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/reformat.html">reformat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"c"</span>, <span class="st">"d"</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span>, <span class="va">r</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] A    B    B    &lt;NA&gt;</span></span>
<span><span class="co">#&gt; Levels: A B</span></span></code></pre></div>
<p>The <code>NA</code> values are also not changed. However, if we
including reformatting for the <code>NA</code>, there is something
different:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rule.html">rule</a></span><span class="op">(</span>A <span class="op">=</span> <span class="st">"a"</span>, C <span class="op">=</span> <span class="cn">NA</span>, B <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"c"</span>, <span class="st">"d"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/reformat.html">reformat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"c"</span>, <span class="st">"d"</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span>, <span class="va">r</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] A B B C</span></span>
<span><span class="co">#&gt; Levels: A B C</span></span></code></pre></div>
<p>By default, the level replacing <code>NA</code> is set as the last
one. This can be changed by setting <code>.na_last = FALSE</code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rule.html">rule</a></span><span class="op">(</span>A <span class="op">=</span> <span class="st">"a"</span>, C <span class="op">=</span> <span class="cn">NA</span>, B <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"c"</span>, <span class="st">"d"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/reformat.html">reformat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"c"</span>, <span class="st">"d"</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span>, <span class="va">r</span>, .na_last <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] A B B C</span></span>
<span><span class="co">#&gt; Levels: A C B</span></span></code></pre></div>
<p>For <code>list</code> of <code>data.frames</code>, the
<code>format</code> argument is actually a nested list of rule. The
first layer indicates the table names, the second layer indicates the
variables in that table. Reformatting is only available for columns of
characters or factors, reformatting columns of another types will result
in a warning.</p>
<div class="section level4">
<h4 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h4>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  <span class="st">"char"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">""</span>, <span class="st">"b"</span>, <span class="cn">NA</span>, <span class="st">"a"</span>, <span class="st">"k"</span>, <span class="st">"x"</span><span class="op">)</span>,</span>
<span>  <span class="st">"fact"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"f1"</span>, <span class="st">"f2"</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="st">"f1"</span>, <span class="st">"f1"</span><span class="op">)</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"f2"</span>, <span class="st">"f1"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  <span class="st">"logi"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">NA</span>, <span class="cn">FALSE</span>, <span class="cn">NA</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">df2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  <span class="st">"char"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span>, <span class="cn">NA</span>, <span class="st">"a"</span>, <span class="st">"k"</span>, <span class="st">"x"</span><span class="op">)</span>,</span>
<span>  <span class="st">"fact"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"f1"</span>, <span class="st">"f2"</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="st">"f1"</span>, <span class="st">"f1"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">db</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>df1 <span class="op">=</span> <span class="va">df1</span>, df2 <span class="op">=</span> <span class="va">df2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">db</span><span class="op">$</span><span class="va">df1</span><span class="op">$</span><span class="va">char</span>, <span class="st">"label"</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"my label"</span></span>
<span></span>
<span><span class="va">rule_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  df1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    char <span class="op">=</span> <span class="fu"><a href="../reference/rule.html">rule</a></span><span class="op">(</span><span class="st">"Empty"</span> <span class="op">=</span> <span class="st">""</span>, <span class="st">"B"</span> <span class="op">=</span> <span class="st">"b"</span>, <span class="st">"Not Available"</span> <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span>,</span>
<span>    fact <span class="op">=</span> <span class="fu"><a href="../reference/rule.html">rule</a></span><span class="op">(</span><span class="st">"F1"</span> <span class="op">=</span> <span class="st">"f1"</span><span class="op">)</span>,</span>
<span>    logi <span class="op">=</span> <span class="fu"><a href="../reference/rule.html">rule</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  df2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    char <span class="op">=</span> <span class="fu"><a href="../reference/rule.html">rule</a></span><span class="op">(</span><span class="st">"Empty"</span> <span class="op">=</span> <span class="st">""</span>, <span class="st">"A"</span> <span class="op">=</span> <span class="st">"a"</span>, <span class="st">"Not Available"</span> <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/reformat.html">reformat</a></span><span class="op">(</span><span class="va">db</span>, <span class="va">rule_map</span>, .na_last <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Not implemented for class: logical! Returning original object.</span></span>
<span><span class="va">res</span></span>
<span><span class="co">#&gt; $df1</span></span>
<span><span class="co">#&gt;            char fact  logi</span></span>
<span><span class="co">#&gt; 1         Empty   F1    NA</span></span>
<span><span class="co">#&gt; 2             B   f2 FALSE</span></span>
<span><span class="co">#&gt; 3 Not Available &lt;NA&gt;  TRUE</span></span>
<span><span class="co">#&gt; 4             a &lt;NA&gt;    NA</span></span>
<span><span class="co">#&gt; 5             k   F1 FALSE</span></span>
<span><span class="co">#&gt; 6             x   F1    NA</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $df2</span></span>
<span><span class="co">#&gt;            char fact</span></span>
<span><span class="co">#&gt; 1             A   f1</span></span>
<span><span class="co">#&gt; 2             b   f2</span></span>
<span><span class="co">#&gt; 3 Not Available &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4             A &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5             k   f1</span></span>
<span><span class="co">#&gt; 6             x   f1</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="rule-attributes">Rule Attributes<a class="anchor" aria-label="anchor" href="#rule-attributes"></a>
</h2>
<p>The behavior of a rule can be further refined using special mapping
values. * <code>.to_NA</code> convert the specified character to
<code>NA</code> at the end of the process.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rule.html">rule</a></span><span class="op">(</span>A <span class="op">=</span> <span class="st">"a"</span>, B <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"c"</span>, <span class="st">"d"</span><span class="op">)</span>, .to_NA <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/reformat.html">reformat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"c"</span>, <span class="st">"d"</span>, <span class="cn">NA</span>, <span class="st">"x"</span><span class="op">)</span>, <span class="va">r</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] A    B    B    &lt;NA&gt; &lt;NA&gt;</span></span>
<span><span class="co">#&gt; Levels: A B</span></span></code></pre></div>
<ul>
<li>
<code>.drop</code> specifies whether unused levels should be
dropped.</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># With drop = FALSE</span></span>
<span><span class="va">obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"c"</span>, <span class="st">"d"</span>, <span class="cn">NA</span><span class="op">)</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"d"</span>, <span class="st">"c"</span>, <span class="st">"a"</span>, <span class="st">"Not used"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rule.html">rule</a></span><span class="op">(</span>A <span class="op">=</span> <span class="st">"a"</span>, B <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"c"</span>, <span class="st">"d"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/reformat.html">reformat</a></span><span class="op">(</span><span class="va">obj</span>, <span class="va">r</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] A    B    B    &lt;NA&gt;</span></span>
<span><span class="co">#&gt; Levels: A B Not used</span></span>
<span></span>
<span><span class="co"># With drop = TRUE</span></span>
<span><span class="va">obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"c"</span>, <span class="st">"d"</span>, <span class="cn">NA</span><span class="op">)</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"d"</span>, <span class="st">"c"</span>, <span class="st">"a"</span>, <span class="st">"Not used"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rule.html">rule</a></span><span class="op">(</span>A <span class="op">=</span> <span class="st">"a"</span>, B <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"c"</span>, <span class="st">"d"</span><span class="op">)</span>, .drop <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/reformat.html">reformat</a></span><span class="op">(</span><span class="va">obj</span>, <span class="va">r</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] A    B    B    &lt;NA&gt;</span></span>
<span><span class="co">#&gt; Levels: A B</span></span></code></pre></div>
<p>Note that behavior of the rule can be overridden using the
corresponding arguments in <code>reformat</code>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rule.html">rule</a></span><span class="op">(</span>A <span class="op">=</span> <span class="st">"a"</span>, B <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"c"</span>, <span class="st">"d"</span><span class="op">)</span>, .to_NA <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span><span class="op">)</span>, .drop <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"c"</span>, <span class="st">"d"</span>, <span class="cn">NA</span>, <span class="st">"x"</span>, <span class="st">"y"</span><span class="op">)</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"d"</span>, <span class="st">"c"</span>, <span class="st">"a"</span>, <span class="st">"Not used"</span>, <span class="st">"x"</span>, <span class="st">"y"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/reformat.html">reformat</a></span><span class="op">(</span><span class="va">obj</span>, <span class="va">r</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] A    B    B    &lt;NA&gt; &lt;NA&gt; y   </span></span>
<span><span class="co">#&gt; Levels: A B y</span></span>
<span></span>
<span><span class="co"># Override</span></span>
<span><span class="fu"><a href="../reference/reformat.html">reformat</a></span><span class="op">(</span><span class="va">obj</span>, <span class="va">r</span>, .to_NA <span class="op">=</span> <span class="st">"y"</span>, .drop <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] A    B    B    &lt;NA&gt; x    &lt;NA&gt;</span></span>
<span><span class="co">#&gt; Levels: A B Not used x</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="nest">
  <p>dunlin is a part of the <strong>NEST</strong> and <a href="https://pharmaverse.org/" class="external-link"><strong>pharmaverse</strong></a>.</p>
</div>
<script type="text/javascript" src="../analytics.js"></script></footer>
</div>





  </body>
</html>
