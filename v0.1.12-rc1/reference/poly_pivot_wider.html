<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Transforming data.frame with multiple Data Column into Wide Format — poly_pivot_wider • dunlin</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Transforming data.frame with multiple Data Column into Wide Format — poly_pivot_wider"><meta name="description" content="Transforming data.frame with multiple Data Column into Wide Format"><meta property="og:description" content="Transforming data.frame with multiple Data Column into Wide Format"><link rel="stylesheet" href="../consent.css"><script src="../consent.js" type="text/javascript" charset="utf-8"></script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">dunlin</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.12</small>

    <div style="width: 140px; margin-left: 0.5rem;"> <small class="nav-text text-muted me-auto">part of</small> <img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/nest.png?raw=true" alt="NEST" style="height: 30px;"><a href="https://pharmaverse.org/" class="external-link"><img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/pharmaverse.png?raw=true" alt="pharmaverse" style="height: 28px;"></a> </div>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Reformatting.html">Reformatting</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-reports" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Reports</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-reports"><li><a class="dropdown-item" href="../coverage-report/">Coverage report</a></li>
    <li><a class="dropdown-item" href="../unit-test-report/">Unit test report</a></li>
    <li><a class="dropdown-item" href="../unit-test-report-non-cran/">Non-CRAN unit test report</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/insightsengineering/dunlin"><span class="fa fa-github"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Transforming data.frame with multiple Data Column into Wide Format</h1>
      <small class="dont-index">Source: <a href="https://github.com/insightsengineering/dunlin/blob/v0.1.12-rc1/R/pivot.R" class="external-link"><code>R/pivot.R</code></a></small>
      <div class="d-none name"><code>poly_pivot_wider.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Transforming data.frame with multiple Data Column into Wide Format</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">poly_pivot_wider</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">id</span>,</span>
<span>  <span class="va">param_from</span>,</span>
<span>  <span class="va">value_from</span>,</span>
<span>  labels_from <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  drop_na <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  drop_lvl <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>(<code>data.frame</code>) to be pivoted.</p></dd>


<dt id="arg-id">id<a class="anchor" aria-label="anchor" href="#arg-id"></a></dt>
<dd><p>(<code>character</code>) the name of the columns whose combination uniquely identify the observations.</p></dd>


<dt id="arg-param-from">param_from<a class="anchor" aria-label="anchor" href="#arg-param-from"></a></dt>
<dd><p>(<code>character</code>) the name of the columns containing the names of the parameters to be pivoted. The
unique values in this column will become column names in the output.</p></dd>


<dt id="arg-value-from">value_from<a class="anchor" aria-label="anchor" href="#arg-value-from"></a></dt>
<dd><p>(<code>character</code>) the name of the column containing the values that will populate the output.</p></dd>


<dt id="arg-labels-from">labels_from<a class="anchor" aria-label="anchor" href="#arg-labels-from"></a></dt>
<dd><p>(<code>character</code>) the name of the column congaing the labels of the new columns. from. If not
provided, the labels will be equal to the column names. When several labels are available for the same column, the
first one will be selected.</p></dd>


<dt id="arg-drop-na">drop_na<a class="anchor" aria-label="anchor" href="#arg-drop-na"></a></dt>
<dd><p>(<code>logical</code>) should column containing only <code>NAs</code> be dropped.</p></dd>


<dt id="arg-drop-lvl">drop_lvl<a class="anchor" aria-label="anchor" href="#arg-drop-lvl"></a></dt>
<dd><p>(<code>logical</code>) should missing levels be dropped in the columns coming from <code>value_from</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>list</code> of <code>data.frame</code> in a wide format with label attribute attached to each columns.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function is adapted to cases where the data are distributed in several columns while the name of the
parameter is in one. Typical example is <code>adsub</code> where numeric data are stored in <code>AVAL</code> while categorical data are
in <code>AVALC</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">test_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  the_obs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"A"</span>, <span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"B"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="st">"D"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  the_obs2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Ax"</span>, <span class="st">"Ax"</span>, <span class="st">"Ax"</span>, <span class="st">"Bx"</span>, <span class="st">"Bx"</span>, <span class="st">"Bx"</span>, <span class="st">"Cx"</span>, <span class="st">"Dx"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  the_param <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"weight"</span>, <span class="st">"height"</span>, <span class="st">"gender"</span>, <span class="st">"weight"</span>, <span class="st">"gender"</span>, <span class="st">"height"</span>, <span class="st">"height"</span>, <span class="st">"other"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  the_label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"Weight (Kg)"</span>, <span class="st">"Height (cm)"</span>, <span class="st">"Gender"</span>, <span class="st">"Weight (Kg)"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"Gender"</span>, <span class="st">"Height (cm)"</span>, <span class="st">"Height (cm)"</span>, <span class="st">"Pre-condition"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  the_val <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">65</span>, <span class="fl">165</span>, <span class="cn">NA</span>, <span class="fl">66</span>, <span class="cn">NA</span>, <span class="fl">166</span>, <span class="fl">155</span>, <span class="cn">NA</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  the_val2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">65</span>, <span class="fl">165</span>, <span class="st">"M"</span>, <span class="fl">66</span>, <span class="st">"F"</span>, <span class="fl">166</span>, <span class="fl">155</span>, <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">poly_pivot_wider</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">test_data</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"the_obs"</span>, <span class="st">"the_obs2"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="st">"the_param"</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"the_val"</span>, <span class="st">"the_val2"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="st">"the_label"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $the_val</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   the_obs the_obs2 height weight</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1       A       Ax    165     65</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2       B       Bx    166     66</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3       C       Cx    155     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4       D       Dx     NA     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $the_val2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   the_obs the_obs2 gender height other weight</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1       A       Ax      M    165  &lt;NA&gt;     65</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2       B       Bx      F    166  &lt;NA&gt;     66</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3       C       Cx   &lt;NA&gt;    155  &lt;NA&gt;   &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4       D       Dx   &lt;NA&gt;   &lt;NA&gt;  TRUE   &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/funprog.html" class="external-link">Reduce</a></span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">u</span>, <span class="va">v</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">u</span>, <span class="va">v</span>, all <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, <span class="va">x</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   the_obs the_obs2 height weight gender other</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1       A       Ax    165     65      M  &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2       B       Bx    166     66      F  &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3       C       Cx    155     NA   &lt;NA&gt;  &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4       D       Dx     NA     NA   &lt;NA&gt;  TRUE</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="nest">
  <p>dunlin is a part of the <strong>NEST</strong> and <a href="https://pharmaverse.org/" class="external-link"><strong>pharmaverse</strong></a>.</p>
</div>
<script type="text/javascript" src="../analytics.js"></script></footer></div>





  </body></html>

